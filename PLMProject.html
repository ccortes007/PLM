@@ -0,0 +1,267 @@
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />

<meta name="author" content="Carlos Cortes Franco" />


<title>Practical Learning Machine Project</title>

<script src="data:application/x-javascript,%2F%2A%21%20jQuery%20v1%2E11%2E0%20%7C%20%28c%29%202005%2C%202014%20jQuery%20Foundation%2C%20Inc%2E%20%7C%20jquery%2Eorg%2Flicense%20%2A%2F%0A%21function%28a%2Cb%29%7B%22object%22%3D%3Dtypeof%20module%26%26%22object%22%3D%3Dtypeof%20module%2Eexports%3Fmodule%2Eexports%3Da%2Edocument%3Fb%28a%2C%210%29%3Afunction%28a%29%7Bif%28%21a%2Edocument%29throw%20new%20Error%28%22jQuery%20requires%20a%20window%20with%20a%20document%22%29%3Breturn%20b%28a%29%7D%3Ab%28a%29%7D%28%...(line truncated)...
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="data:text/css,%2F%2A%21%0A%20%2A%20Bootstrap%20v3%2E3%2E1%20%28http%3A%2F%2Fgetbootstrap%2Ecom%29%0A%20%2A%20Copyright%202011%2D2014%20Twitter%2C%20Inc%2E%0A%20%2A%20Licensed%20under%20MIT%20%28https%3A%2F%2Fgithub%2Ecom%2Ftwbs%2Fbootstrap%2Fblob%2Fmaster%2FLICENSE%29%0A%20%2A%2F%2F%2A%21%20normalize%2Ecss%20v3%2E0%2E2%20%7C%20MIT%20License%20%7C%20git%2Eio%2Fnormalize%20%2A%2Fhtml%7Bfont%2Dfamily%3Asans%2Dserif%3B%2Dwebkit%2Dtext%2Dsize%2Dadjust%3A100%25%3B%2Dms%2Dtext%2Dsize%2Dadjust%3A100%25%...(line truncated)...
<script src="data:application/x-javascript,%2F%2A%21%0A%20%2A%20Bootstrap%20v3%2E3%2E1%20%28http%3A%2F%2Fgetbootstrap%2Ecom%29%0A%20%2A%20Copyright%202011%2D2014%20Twitter%2C%20Inc%2E%0A%20%2A%20Licensed%20under%20MIT%20%28https%3A%2F%2Fgithub%2Ecom%2Ftwbs%2Fbootstrap%2Fblob%2Fmaster%2FLICENSE%29%0A%20%2A%2F%0Aif%28%22undefined%22%3D%3Dtypeof%20jQuery%29throw%20new%20Error%28%22Bootstrap%27s%20JavaScript%20requires%20jQuery%22%29%3B%2Bfunction%28a%29%7Bvar%20b%3Da%2Efn%2Ejquery%2Esplit%28%22%20%22%29%5B0%5D...(line truncated)...
<script src="data:application/x-javascript,%2F%2A%2A%0A%2A%20%40preserve%20HTML5%20Shiv%203%2E7%2E2%20%7C%20%40afarkas%20%40jdalton%20%40jon%5Fneal%20%40rem%20%7C%20MIT%2FGPL2%20Licensed%0A%2A%2F%0A%2F%2F%20Only%20run%20this%20code%20in%20IE%208%0Aif%20%28%21%21window%2Enavigator%2EuserAgent%2Ematch%28%22MSIE%208%22%29%29%20%7B%0A%21function%28a%2Cb%29%7Bfunction%20c%28a%2Cb%29%7Bvar%20c%3Da%2EcreateElement%28%22p%22%29%2Cd%3Da%2EgetElementsByTagName%28%22head%22%29%5B0%5D%7C%7Ca%2EdocumentElement%3Breturn%...(line truncated)...
<script src="data:application/x-javascript,%2F%2A%21%20Respond%2Ejs%20v1%2E4%2E2%3A%20min%2Fmax%2Dwidth%20media%20query%20polyfill%20%2A%20Copyright%202013%20Scott%20Jehl%0A%20%2A%20Licensed%20under%20https%3A%2F%2Fgithub%2Ecom%2Fscottjehl%2FRespond%2Fblob%2Fmaster%2FLICENSE%2DMIT%0A%20%2A%20%20%2A%2F%0A%0Aif%20%28%21%21window%2Enavigator%2EuserAgent%2Ematch%28%22MSIE%208%22%29%29%20%7B%0A%21function%28a%29%7B%22use%20strict%22%3Ba%2EmatchMedia%3Da%2EmatchMedia%7C%7Cfunction%28a%29%7Bvar%20b%2Cc%3Da%2Edocum...(line truncated)...

<style type="text/css">code{white-space: pre;}</style>
<link href="data:text/css,pre%20%2Eoperator%2C%0Apre%20%2Eparen%20%7B%0A%20color%3A%20rgb%28104%2C%20118%2C%20135%29%0A%7D%0A%0Apre%20%2Eliteral%20%7B%0A%20color%3A%20%23990073%0A%7D%0A%0Apre%20%2Enumber%20%7B%0A%20color%3A%20%23099%3B%0A%7D%0A%0Apre%20%2Ecomment%20%7B%0A%20color%3A%20%23998%3B%0A%20font%2Dstyle%3A%20italic%0A%7D%0A%0Apre%20%2Ekeyword%20%7B%0A%20color%3A%20%23900%3B%0A%20font%2Dweight%3A%20bold%0A%7D%0A%0Apre%20%2Eidentifier%20%7B%0A%20color%3A%20rgb%280%2C%200%2C%200%29%3B%0A%7D%0A%0Apre%2...(line truncated)...
<script src="data:application/x-javascript,%0Avar%20hljs%3Dnew%20function%28%29%7Bfunction%20m%28p%29%7Breturn%20p%2Ereplace%28%2F%26%2Fgm%2C%22%26amp%3B%22%29%2Ereplace%28%2F%3C%2Fgm%2C%22%26lt%3B%22%29%7Dfunction%20f%28r%2Cq%2Cp%29%7Breturn%20RegExp%28q%2C%22m%22%2B%28r%2EcI%3F%22i%22%3A%22%22%29%2B%28p%3F%22g%22%3A%22%22%29%29%7Dfunction%20b%28r%29%7Bfor%28var%20p%3D0%3Bp%3Cr%2EchildNodes%2Elength%3Bp%2B%2B%29%7Bvar%20q%3Dr%2EchildNodes%5Bp%5D%3Bif%28q%2EnodeName%3D%3D%22CODE%22%29%7Breturn%20q%7Dif%28%2...(line truncated)...
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>
<script type="text/javascript">
if (window.hljs && document.readyState && document.readyState === "complete") {
   window.setTimeout(function() {
      hljs.initHighlighting();
   }, 0);
}
</script>



</head>

<body>

<style type="text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img { 
  max-width:100%; 
  height: auto; 
}
</style>
<div class="container-fluid main-container">


<div id="header">
<h1 class="title">Practical Learning Machine Project</h1>
<h4 class="author"><em>Carlos Cortes Franco</em></h4>
<h4 class="date"><em>Sunday, June 21, 2015</em></h4>
</div>


<div id="background" class="section level2">
<h2>Background</h2>
<p>Using devices such as Jawbone Up, Nike FuelBand, and Fitbit it is now possible to collect a large amount of data about personal activity relatively inexpensively. These type of devices are part of the quantified self movement - a group of enthusiasts who take measurements about themselves regularly to improve their health, to find patterns in their behavior, or because they are tech geeks. One thing that people regularly do is quantify how much of a particular activity they do, but they rarely quantify h...(line truncated)...
</div>
<div id="data" class="section level2">
<h2>Data</h2>
<p>The training data for this project are available here: <a href="https://d396qusza40orc.cloudfront.net/predmachlearn/pml-training.csv" class="uri">https://d396qusza40orc.cloudfront.net/predmachlearn/pml-training.csv</a> The test data are available here: <a href="https://d396qusza40orc.cloudfront.net/predmachlearn/pml-testing.csv" class="uri">https://d396qusza40orc.cloudfront.net/predmachlearn/pml-testing.csv</a></p>
<p>The data for this project come from this source: <a href="http://groupware.les.inf.puc-rio.br/har" class="uri">http://groupware.les.inf.puc-rio.br/har</a>.</p>
</div>
<div id="loading-the-data" class="section level2">
<h2>Loading the data</h2>
<pre class="r"><code>#{r Block1, cache = TRUE}
setwd(&quot;C:/GitHub/PLM&quot;)
url &lt;- &quot;http://d396qusza40orc.cloudfront.net/predmachlearn/pml-training.csv&quot;
dfile &lt;- &quot;C:/GitHub/PLM/pml-training.csv&quot;
if(!file.exists(dfile)) {
        download.file(url, dfile)
}
train_raw &lt;- read.csv(dfile,na.strings=c(&quot;NA&quot;,&quot;&quot;,&quot;#DIV/0!&quot;))
url &lt;- &quot;http://d396qusza40orc.cloudfront.net/predmachlearn/pml-testing.csv&quot;
dfile &lt;- &quot;C:/GitHub/PLM/pml-testing.csv&quot;
if(!file.exists(dfile)) {
        download.file(url, dfile)
}
test_raw &lt;- read.csv(dfile,na.strings=c(&quot;NA&quot;,&quot;&quot;,&quot;#DIV/0!&quot;))</code></pre>
</div>
<div id="cleaning-the-datasets" class="section level2">
<h2>Cleaning the datasets</h2>
<pre class="r"><code># Removing columns with NA
train_clean &lt;- train_raw[!sapply(train_raw,function(z)any(is.na(z)))]
test_clean  &lt;- test_raw[!sapply(test_raw,function(z)any(is.na(z)))]

# Eliminating non important columns
train_total &lt;- train_clean[,-c(1:7)]
test_total  &lt;- test_clean[,-c(1:7)]</code></pre>
</div>
<div id="data-analysis" class="section level2">
<h2>Data analysis</h2>
<pre class="r"><code># Check Classe Frequency distribution 
plot(train_total$classe, col=&quot;blue&quot;, main=&quot;Clasee Values Distribution&quot;, xlab=&quot;Classe&quot;, ylab=&quot;Frequency&quot;)</code></pre>
<p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAABUAAAAPACAMAAADDuCPrAAAAZlBMVEUAAAAAADoAAGYAAP8AOjoAOpAAZmYAZrY6AAA6OgA6Ojo6ZmY6kLY6kNtmAABmOpBmZjpmZmZmtv+QOgCQ29uQ2/+2ZgC2kDq2/7a2///bkDrbtmbb////tmb/25D//7b//9v///9P9w70AAAACXBIWXMAAB2HAAAdhwGP5fFlAAAgAElEQVR4nO3dfWPaStedcXLaNOmL0z5JQ3toSOLv/yWLQMBIGtnWmO09e6/r98d9HxObYRlmWULSsHsGADTZeT8AAIiKAgWARhQoADSiQAGgEQUKAI0oUABoRIECQCMKFAAaUaAA0IgCBYBGFCgANKJAAaARBQoAjShQAGhEgQJAIwoUABpRoADQiAIFgEYUKAA0okABoBEFCgCNKFAAaESBAkAjChQAGlGgANCIAgWARhQoADSiQAGgE...(line truncated)...
<pre class="r"><code>table(train_total$classe)</code></pre>
<pre><code>## 
##    A    B    C    D    E 
## 5580 3797 3422 3216 3607</code></pre>
</div>
<div id="partition-the-training-dataset" class="section level2">
<h2>Partition the training dataset</h2>
<pre class="r"><code>library(caret)</code></pre>
<pre><code>## Loading required package: lattice
## Loading required package: ggplot2</code></pre>
<pre class="r"><code># Partition the training dataset
inTrain &lt;- createDataPartition(y=train_total$classe, p=0.7, list=FALSE)
train &lt;- train_total[inTrain,]
test  &lt;- train_total[-inTrain,]</code></pre>
</div>
<div id="model-training-for-lda-and-random-forest" class="section level2">
<h2>Model training for lda and random forest</h2>
<pre class="r"><code>modFit_lda &lt;- train(classe ~. , data=train, method=&quot;lda&quot;)</code></pre>
<pre><code>## Loading required package: MASS</code></pre>
<pre class="r"><code>library(randomForest)</code></pre>
<pre><code>## randomForest 4.6-10
## Type rfNews() to see new features/changes/bug fixes.</code></pre>
<pre class="r"><code>modFit_rf  &lt;- randomForest(classe ~. , data=train, method=&quot;class&quot;)</code></pre>
</div>
<div id="comparing-accuracies-of-both-methods" class="section level2">
<h2>Comparing accuracies of both methods</h2>
<pre class="r"><code>predict_lda &lt;- predict(modFit_lda, test)
print(confusionMatrix(predict_lda, test$classe))</code></pre>
<pre><code>## Confusion Matrix and Statistics
## 
##           Reference
## Prediction    A    B    C    D    E
##          A 1361  162  115   44   30
##          B   44  749   83   44  185
##          C  137  135  691  132  115
##          D  123   37  118  709   96
##          E    9   56   19   35  656
## 
## Overall Statistics
##                                           
##                Accuracy : 0.7079          
##                  95% CI : (0.6961, 0.7195)
##     No Information Rate : 0.2845          
##     P-Value [Acc &gt; NIR] : &lt; 2.2e-16       
##                                           
##                   Kappa : 0.6306          
##  Mcnemar's Test P-Value : &lt; 2.2e-16       
## 
## Statistics by Class:
## 
##                      Class: A Class: B Class: C Class: D Class: E
## Sensitivity            0.8130   0.6576   0.6735   0.7355   0.6063
## Specificity            0.9166   0.9250   0.8932   0.9240   0.9752
## Pos Pred Value         0.7950   0.6778   0.5711   0.6547   0.8465
## Neg Pred Value         0.9250   0.9184   0.9283   0.9469   0.9166
## Prevalence             0.2845   0.1935   0.1743   0.1638   0.1839
## Detection Rate         0.2313   0.1273   0.1174   0.1205   0.1115
## Detection Prevalence   0.2909   0.1878   0.2056   0.1840   0.1317
## Balanced Accuracy      0.8648   0.7913   0.7833   0.8297   0.7908</code></pre>
<pre class="r"><code>predict_rf &lt;- predict(modFit_rf, test)
print(confusionMatrix(predict_rf, test$classe))</code></pre>
<pre><code>## Confusion Matrix and Statistics
## 
##           Reference
## Prediction    A    B    C    D    E
##          A 1672    6    0    0    0
##          B    2 1131    8    0    0
##          C    0    2 1014    9    2
##          D    0    0    4  951    1
##          E    0    0    0    4 1079
## 
## Overall Statistics
##                                           
##                Accuracy : 0.9935          
##                  95% CI : (0.9911, 0.9954)
##     No Information Rate : 0.2845          
##     P-Value [Acc &gt; NIR] : &lt; 2.2e-16       
##                                           
##                   Kappa : 0.9918          
##  Mcnemar's Test P-Value : NA              
## 
## Statistics by Class:
## 
##                      Class: A Class: B Class: C Class: D Class: E
## Sensitivity            0.9988   0.9930   0.9883   0.9865   0.9972
## Specificity            0.9986   0.9979   0.9973   0.9990   0.9992
## Pos Pred Value         0.9964   0.9912   0.9873   0.9948   0.9963
## Neg Pred Value         0.9995   0.9983   0.9975   0.9974   0.9994
## Prevalence             0.2845   0.1935   0.1743   0.1638   0.1839
## Detection Rate         0.2841   0.1922   0.1723   0.1616   0.1833
## Detection Prevalence   0.2851   0.1939   0.1745   0.1624   0.1840
## Balanced Accuracy      0.9987   0.9954   0.9928   0.9927   0.9982</code></pre>
</div>
<div id="showing-the-most-important-variables" class="section level2">
<h2>Showing the most important variables</h2>
<pre class="r"><code>varImp &lt;- varImp(modFit_rf)
varImp_rnames &lt;- rownames(varImp) 
vars &lt;- order(varImp, decreasing = TRUE)
vI &lt;- data.frame(variable = varImp_rnames[vars], importance = varImp[vars,])
head(vI)</code></pre>
<pre><code>##            variable importance
## 1         roll_belt   878.5470
## 2          yaw_belt   600.0531
## 3     pitch_forearm   530.2666
## 4 magnet_dumbbell_z   528.1493
## 5 magnet_dumbbell_y   473.6369
## 6        pitch_belt   468.1863</code></pre>
</div>
<div id="predicting-for-the-test-dataset-with-the-best-method" class="section level2">
<h2>Predicting for the test dataset with the best method</h2>
<pre class="r"><code>#predict(modFit_lda, newdata=test_total)
predict(modFit_rf,  newdata=test_total)</code></pre>
<pre><code>##  1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 
##  B  A  B  A  A  E  D  B  A  A  B  C  B  A  E  E  A  B  B  B 
## Levels: A B C D E</code></pre>
</div>
<div id="writing-the-answer-files" class="section level2">
<h2>Writing the answer files</h2>
<pre class="r"><code>answers &lt;- as.vector(predict(modFit_rf,  newdata=test_total))

pml_write_files = function(x) {
    n = length(x)
    for (i in 1:n) {
        filename = paste0(&quot;problem_id_&quot;, i, &quot;.txt&quot;)
        write.table(x[i], file = filename, quote = FALSE, row.names = FALSE, 
            col.names = FALSE)
    }
}

pml_write_files(answers)</code></pre>
</div>


</div>

<script>

// add bootstrap table styles to pandoc tables
$(document).ready(function () {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
});

</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
